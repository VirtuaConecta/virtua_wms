@model List<ClienteViewModel>
@{
    ViewBag.Title = "Lista de cliente";
    Layout = "~/Views/Shared/__LayoutWms.cshtml";
}

@{ 
    var cnpj_cpf = "";
}

@section MeusStyles
{
    <link href="~/assets/css/tabela_local.css" rel="stylesheet" />

    <style>
        .pm {
            cursor: pointer;
        }

        .detail {
            background-color: #d4d0d8;
            padding: 7px;
        }

        td.details-control {
        
            background: url('../../assets/img/edit_icon.png') no-repeat center center;
            cursor: pointer;
        }

       
    </style>
}

<div class="form-group">
    <h2 class="col-sm-11 ">Lista de cliente</h2>
    @* <input class="col-sm-1 pm excel" style="height: 64px;width:64px;border:none" type="button" id="btnExport" />*@



    <a class="fa-4x fa fa-plus-circle pm"  id="CriarCliente" style="border:none;background-color:transparent;" href="~/Cadastro/Cadastro_Cliente?Cnpj="></a>
</div>

<div class="col-sm-12 col-md-12">
    <div class="block-flat">

        <table id="TabelaPed" class="tabelaFormato1">
            <thead>
                <tr>
                 

                    <th>Nome</th>
                    <th>Fantasia</th>
                    <th>Endereco</th>
                    <th>Cnpj/Cnpj</th>


                    <th>Status</th>
                    <th>Obs</th>
                    <th></th>

                </tr>
            </thead>
            <tbody>

                @foreach (var cliente in Model)
                {
                <tr>



                    <td>@cliente.NomeCliente</td>
                    <td>@cliente.Fantasia</td>
                    <td>@cliente.Endereco</td>

                    @if (cliente.Cnpj != null)
                    {
                        <td>@cliente.Cnpj</td>




                    }
                    else
                    {
                        <td>@cliente.Cpf</td>




                    }
                    @{
                        cnpj_cpf = "Cadastro_Cliente?Id_cli=" + cliente.IdCliente;
                    }
                    <td>@cliente.Status</td>
                    <td>@cliente.Obs</td>
                    <td ><a href="@cnpj_cpf" style="color:transparent;position:center;"><img src="~/assets/img/edit_icon.png" /></a></td>

                </tr>

                }

            </tbody>
        </table>

    </div>

</div>

<div class="col-sm-12 col-md-12 modal" id="modal" style="background:transparent;">

</div>

@section MeusScripts{
    <script type="text/javascript">



        $(document).ready(function () {

            var tabela = $('#TabelaPed').DataTable({

                paging: true

            });


            
         

            //$('#TabelaPed tbody').on('click', 'td.details-control', function () {
            //    var oTr = $(this).parent('tr');
            //    var Cnpj = oTr.find("td:eq(3)").html()
            //    $("#modal").load("Cadastro_Cliente?Cnpj=" + Cnpj, function () {
            //        $("#modal").modal();
            //    });
            //});

            //$('#CriarCliente').on('click', function () {

            //    var Cnpj = "";
            //    $("#modal").load("Cadastro_Cliente?Cnpj=" + Cnpj, function () {
            //        $("#modal").modal();
            //    });
            //});


        });

    </script>
}
